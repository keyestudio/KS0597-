# 智慧学校的安装

## **步骤 1：安装ESP32主控板**

1.1

所需零件

![ZH_01](./img/ZH_01.png)

1.2

![ZH_02](./img/ZH_02.png)

1.3

![ZH_03](./img/ZH_03.png)

1.4

**注意：此步骤需要进行舵机角度的校准，按图示操作**。

![D1](./img/D1.png)

**特别提醒：** 这里需要使用到2根公对母杜邦线将舵机控制模块的G引脚和5V引脚分别连接到ESP32主控板上的GND引脚和5V引脚，舵机的橙线、红线和棕线分别连接到舵机控制模块的S引脚、5V引脚和G引脚。如下图所示：

![D2](./img/D2.png)

![D3](./img/D3.png)

**按图示完成舵机的校准后，请将所接线拆除，无需保留**。

## 步骤 2：安装课桌和椅子

2.1

所需零件

![ZH_04](./img/ZH_04.png)

2.2

![ZH_05](./img/ZH_05.png)

![ZH_06](./img/ZH_06.png)

![ZH_07](./img/ZH_07.png)

![ZH_08](./img/ZH_08.png)

![ZH_09](./img/ZH_09.png)

![ZH_10](./img/ZH_10.png)

2.3

![ZH_11](./img/ZH_11.png)

![ZH_12](./img/ZH_12.png)

## 步骤 3：安装后墙面的模块

3.1

所需零件

![ZH_13](./img/ZH_13.png)

3.2

![ZH_14](./img/ZH_14.png)

![ZH_15](./img/ZH_15.png)

3.3

![ZH_16](./img/ZH_16.png)

![ZH_17](./img/ZH_17.png)

## 步骤 4：安装教室黑板

4.1

所需零件

![ZH_18](./img/ZH_18.png)

4.2

![ZH_19](./img/ZH_19.png)

![ZH_20](./img/ZH_20.png)

4.3

![ZH_21](./img/ZH_21.png)

![ZH_22](./img/ZH_22.png)

## 步骤 5：安装正面墙的模块

5.1

所需零件

![ZH_23](./img/ZH_23.png)

5.2

![ZH_24](./img/ZH_24.png)

![ZH_25](./img/ZH_25.png)

5.3

![ZH_26](./img/ZH_26.png)

![ZH_27](./img/ZH_27.png)

## 步骤 6：安装顶部亚克力天花板和RGB模块

6.1

所需零件

![ZH_28](./img/ZH_28.png)

6.2

![ZH_29](./img/ZH_29.png)

![ZH_30](./img/ZH_30.png)

## 步骤 7：安装教学楼墙面

7.1

所需零件

![ZH_31](./img/ZH_31.png)

7.2

![ZH_32](./img/ZH_32.png)

![ZH_33](./img/ZH_33.png)

## 步骤 8：安装两侧墙面和单路按钮模块

8.1

所需零件

![ZH_34](./img/ZH_34.png)

8.2

![ZH_35](./img/ZH_35.png)

![ZH_36](./img/ZH_36.png)

8.3

![ZH_37](./img/ZH_37.png)

![ZH_38](./img/ZH_38.png)

## 步骤 9：给教学楼配线材

9.1

请按照下方顺序进行接线，接线材时，请注意区分线材的颜色。

| 编号 |        元器件         |              线材               |   ESP32主板引脚    |
| :--: | :-------------------: | :-----------------------------: | :----------------: |
|  1   |        摄像头         |     4PIN 母头单拼(黑红黄白)     |                    |
|  2   |     单路按键模块      |           3PIN 250mm            |        IO26        |
|  3   |  人体红外热释传感器   |           3PIN 250mm            |        IO25        |
|  4   |    步进电机驱动板     |           6PIN 200mm            |                    |
|  5   |      白色LED模块      |           3PIN 200mm            |        IO12        |
|  6   |      电机驱动板       | 4PIN 350mm 连拼转单拼(黑红蓝绿) | IO5(INA) IO13(INB) |
|  7   |    无源蜂鸣器模块     |           3PIN 200mm            |        IO19        |
|  8   |      避障传感器       |           3PIN 200mm            |        IO18        |
|  9   |       OLED模块        | 4PIN 200mm 连拼转单拼(黑红蓝绿) |                    |
|  10  | ENS160 空气质量传感器 |    4PIN 200mm 连拼(黑红蓝绿)    |      BUS 12C       |
|  11  |  AHT20 温湿度传感器   |    4PIN 200mm 连拼(黑红蓝绿)    |      BUS 12C       |
|  12  |     RFID刷卡模块      |    4PIN 400mm 连拼(黑红蓝绿)    |      BUS 12C       |
|  13  |    光敏电阻传感器     |           3PIN 200mm            |        IO34        |
|  14  |        RGB模块        |           3PIN 200mm            |        IO4         |



9.2

按图示将线材接到ESP32主控板。

|  模块  |        线材         | 对应引脚 |
| :----: | :-----------------: | :------: |
| 摄像头 | 4PIN 母单(黑红黄白) |   UART   |

此步骤需要使用的线材。

![XH2.54-4P 200mm 01](./img/XH2.54-4P 200mm 01.png)

接线时，连拼端口与摄像头连接，单拼端口从1号孔穿入，再接到ESP32主控板。

![J1-1](./img/J1-1.jpg)

接入主控板时，请注意区分线材颜色。

| 摄像头 | 线材颜色 | ESP32主控板引脚 |
| :----: | :------: | :-------------: |
|   V    |   红线   |        V        |
|   G    |   黑线   |        G        |
|   TX   |   黄线   |       RX        |
|   RX   |   白线   |       TX        |

![J1](./img/J1.png)

9.3

按图示将线材接到ESP32主控板。

|     模块     |    线材    | 对应引脚 |
| :----------: | :--------: | :------: |
| 单路按钮模块 | 3PIN 250mm |   IO26   |

此步骤需要使用的线材。

![3p 250mm 01](./img/3p 250mm 01.png)

接线时，一头端口与单路按钮模块连接，另一头端口从2号孔、1号孔依次穿入，再接到ESP32主控板。

![j2-1](./img/j2-1.jpg)

接入主控板时，请注意区分线材的颜色。

| 模块 | 线材颜色 | ESP32主控板引脚 |
| :--: | :------: | :-------------: |
|  V   |   红线   |        V        |
|  G   |   黑线   |        G        |
|  S   |   黄线   |      IO26       |

![J2](./img/J2.png)

9.4

按图示将线材接到ESP32主控板。

|        模块        |    线材    | 对应引脚 |
| :----------------: | :--------: | :------: |
| 人体红外热释传感器 | 3PIN 250mm |   IO25   |

此步骤需要使用的线材。

![3p 250mm 02](./img/3p 250mm 02.png)

接线时，一头端口与人体红外释热传感器连接，另一头端口从3号孔、1号孔依次穿入，再接到ESP32主控板。

![j3](./img/j3.JPG)

接入主控板时，请注意区分线材的颜色。

| 模块 | 线材颜色 | ESP32主控板引脚 |
| :--: | :------: | :-------------: |
|  V   |   红线   |        V        |
|  G   |   黑线   |        G        |
|  S   |   黄线   |      IO25       |

![J3](./img/J3.png)

9.5

按图示将线材接到ESP32主控板。

|      模块      |    线材    | 对应引脚 |
| :------------: | :--------: | :------: |
| 步进电机驱动板 | 6PIN 200mm |          |

此步骤需要使用的线材。

![6Pin ](./img/6Pin .png)

⚠️ <span style="color: rgb(200, 70, 100);">**提醒：需要注意6PIN线材不区分颜色，请确保线材接入模块与主控板是对应的。**</span>

接线时，一头端口与步进电机驱动板连接，另一头端口从4号孔穿入，再接到ESP32主控板。

![j4](./img/j4.jpg)

接入主控板时，请根据步进电机驱动板上所接线的排序，并如下图对应接入主控板。

![J4](./img/J4.png)

9.6

按图示将线材接到ESP32主控板。

|    模块     |    线材    | 对应引脚 |
| :---------: | :--------: | :------: |
| 白色LED模块 | 3PIN 200mm |   IO12   |

此步骤需要使用的线材。

![3p 200mm 01](./img/3p 200mm 01.png)

接线时，一头端口与白色LED模块连接，另一头端口从5号孔穿入，再接到ESP32主控板。

![j5](./img/j5.jpg)

接入主控板时，请注意区分线材的颜色。

| 模块 | 线材颜色 | ESP32主控板引脚 |
| :--: | :------: | :-------------: |
|  V   |   红线   |        V        |
|  G   |   黑线   |        G        |
|  S   |   黄线   |      IO12       |

![J5](./img/J5.png)

9.7

按图示将线材接到ESP32主控板。

|    模块    |              线材               | 对应引脚  |
| :--------: | :-----------------------------: | :-------: |
| 电机驱动板 | 4PIN 350mm 连拼转单拼(黑红蓝绿) | IO5、IO13 |

此步骤需要的线材。

![4Pin 350mm 01](./img/4Pin 350mm 01.png)

接线时，连拼端口与电机驱动板模块连接，单拼端口从3号孔、1号孔依次穿入，再接到ESP32主控板。

![j6](./img/j6.jpg)

![j6-1](./img/j6-1.jpg)

接线时，请注意区分线材的颜色。

| 模块 | 线材颜色 | ESP32主控板引脚 |
| :--: | :------: | :-------------: |
| GND  |   黑线   |        G        |
| VCC  |   红线   |        V        |
| B-IB |   绿线   |      IO13       |
| B-IA |   蓝线   |       IO5       |

![J6](./img/J6.png)

9.8

按图示将线材接到ESP32主控板。

|      模块      |    线材    | 对应引脚 |
| :------------: | :--------: | :------: |
| 无源蜂鸣器模块 | 3PIN 200mm |   IO19   |

此步骤需要使用的线材。

![3p 200mm 02](./img/3p 200mm 02.png)

接线时，一头端口与无缘蜂鸣器模块连接，另一头端口从6号孔穿入，再接到ESP32主控板。

![j7](./img/j7.JPG)

接入主控板时，请注意区分线材的颜色。

| 模块 | 线材颜色 | ESP32主控板引脚 |
| :--: | :------: | :-------------: |
|  V   |   红线   |        V        |
|  G   |   黑线   |        G        |
|  S   |   黄线   |      IO19       |

![J7](./img/J7.png)

9.9

按图示将线材接到ESP32主控板。

| 模块 |    线材    | 对应引脚 |
| :--: | :--------: | :------: |
| 避障 | 3PIN 200mm |   IO18   |

此步骤需要使用的线材。

![3p 200mm 03](./img/3p 200mm 03.png)

接线时，一头端口与避障模块连接，另一头端口从6号孔穿入，再接到ESP32主控板。

![j8](./img/j8.jpg)

接入主控板时，请注意区分线材的颜色。

| 模块 | 线材颜色 | ESP32主控板引脚 |
| :--: | :------: | :-------------: |
|  V   |   红线   |        V        |
|  G   |   黑线   |        G        |
|  S   |   黄线   |      IO18       |

![J8](./img/J8.png)

9.10

按图示将线材接到ESP32主控板。

|       模块       |              线材               | 对应引脚 |
| :--------------: | :-----------------------------: | :------: |
| OLED液晶屏幕模块 | 4PIN 200mm 连拼转单拼(黑红蓝绿) | BUS 12C  |

此步骤需要使用的线材。

![4Pin 150mm](./img/4Pin 150mm.png)

接线时，连拼端口与OLED液晶屏幕模块连接，单拼端口接到ESP32主控板。

![j9](./img/j9.jpg)

![j9-1](./img/j9-1.jpg)



接入主控板时，请注意区分线材的颜色。

| 模块 | 线材颜色 | ESP32主控板引脚 |
| :--: | :------: | :-------------: |
| GND  |   红线   |       GND       |
| VCC  |   黑线   |       VCC       |
| SCL  |   蓝线   |       SCL       |
| SDA  |   绿线   |       SDA       |

<span style="color: rgb(200, 70, 100);">**注意：主板上的SCL、SDA顺序与OLED模块的相反。**</span>

![J9](./img/J9.png)

9.11

按图示将线材接到ESP32主控板。

|         模块          |           线材            | 对应引脚 |
| :-------------------: | :-----------------------: | :------: |
| ENS160 空气质量传感器 | 4PIN 200mm 连拼(黑红蓝绿) | BUS 12C  |

此步骤需要使用的线材。

![4Pin 200mm  Double splicing 01](./img/4Pin 200mm  Double splicing 01.png)

接线时，一头端口ENS160空气质量传感器连接，另一头端口从7号孔穿入，再接到ESP32主控板。

![j10](./img/j10.jpg)

接入主控板时，请注意区分线材的颜色。

| 模块 | 线材颜色 | ESP32主控板引脚 |
| :--: | :------: | :-------------: |
| GND  |   黑线   |       GND       |
| VCC  |   红线   |        V        |
| SDA  |   蓝线   |       SDA       |
| SCL  |   绿线   |       SCL       |

![J10](./img/J10.png)

9.12

按图示将线材接到ESP32主控板。

|        模块        |           线材            | 对应引脚 |
| :----------------: | :-----------------------: | :------: |
| AHT20 温湿度传感器 | 4PIN 200mm 连拼(黑红蓝绿) | BUS 12C  |

此步骤需要使用的线材。

![4Pin 200mm  Double splicing 02](./img/4Pin 200mm  Double splicing 02.png)

接线时，一头端口与AHT20温湿度传感器连接，另一头端口从7号孔穿入，再接到ESP32主控板。

![j11](./img/j11.jpg)

接入主控板时，请注意区分线材的颜色。

| 模块 | 线材颜色 | ESP32主控板引脚 |
| :--: | :------: | :-------------: |
| GND  |   黑线   |       GND       |
| VCC  |   红线   |        V        |
| SDA  |   蓝线   |       SDA       |
| SCL  |   绿线   |       SCL       |

![J11](./img/J11.png)

9.13

按图示将线材接到ESP32主控板。

|     模块     |           线材            | 对应引脚 |
| :----------: | :-----------------------: | :------: |
| RFID刷卡模块 | 4PIN 400mm 连拼(黑红蓝绿) | BUS 12C  |

此步骤需要使用的线材。

![ ](./img/4Pin 400mm Double splicing 02.png)

接线时，一头端口与RFID刷卡模块连接，另一头端口从3号、1号孔依次穿入，再接到ESP32主控板。

![j12](./img/j12.jpg)

![j12-1](./img/j12-1.jpg)

接入主控板时，请注意区分线材的颜色。

| 模块 | 线材颜色 | ESP32主控板引脚 |
| :--: | :------: | :-------------: |
| GND  |   黑线   |       GND       |
| VCC  |   红线   |        V        |
| SDA  |   蓝线   |       SDA       |
| SCL  |   绿线   |       SCL       |

![J12](./img/J12.png)

9.14

按图示将线材接到ESP32主控板。

|      模块      |    线材    | 对应引脚 |
| :------------: | :--------: | :------: |
| 光敏电阻传感器 | 3PIN 200mm |   IO34   |

此步骤需要使用的线材。

![3p 200mm 04](./img/3p 200mm 04.png)

接线时，一头端口与光敏电阻传感器连接，另一头端口从8号孔穿入，再接到ESP32主控板。

![j13](./img/j13.jpg)

接入主控板时，请注意区分线材的颜色。

| 模块 | 线材颜色 | ESP32主控板引脚 |
| :--: | :------: | :-------------: |
|  V   |   红线   |        V        |
|  G   |   黑线   |        G        |
|  S   |   黄线   |      IO34       |

![J13](./img/J13.png)

9.15

按图示将线材接到ESP32主控板。

|  模块   |    线材    | 对应引脚 |
| :-----: | :--------: | :------: |
| RGB模块 | 3PIN 200mm |   IO4    |

此步骤需要使用的线材。

![3p 200mm 05](./img/3p 200mm 05.png)



接线时，一头端口与RGB模块连接，另一头端口从8号孔穿入，再接到ESP32主控板。

![j15](./img/j15.jpg)

接线时，请注意区分线材的颜色。

| 模块 | 线材颜色 | ESP32主控板引脚 |
| :--: | :------: | :-------------: |
|  V   |   红线   |        V        |
|  G   |   黑线   |        G        |
|  S   |   黄线   |       IO4       |

![J15](./img/J15.png)

⚠**提醒：上述传感器模块接好线材之后的效果如下图。**

![j16](./img/j16.jpg)

## 步骤10：安装电池盒卡槽

10.1

所需零件

![ZH_39](./img/ZH_39.png)

10.2

![ZH_40](./img/ZH_40.png)

![ZH_41](./img/ZH_41.png)

## 步骤 11：安装教学楼和底座

11.1

所需零件

![ZH_42](./img/ZH_42.png)

11.2

![ZH_43](./img/ZH_43.png)

![ZH_44](./img/ZH_44.png)

11.3

![ZH_45](./img/ZH_45.png)

![ZH_46](./img/ZH_46.png)

## 步骤 12：安装篮筐和避障传感器

12.1

所需零件

![ZH_47](./img/ZH_47.png)

12.2

![ZH_48](./img/ZH_48.png)

![ZH_49](./img/ZH_49.png)

12.3

![ZH_50](./img/ZH_50.png)

![ZH_51](./img/ZH_51.png)

## 步骤 13：安装路灯

13.1

所需零件

![ZH_52](./img/ZH_52.png)

13.2

![ZH_53](./img/ZH_53.png)



![ZH_54](./img/ZH_54.png)

## 步骤 14：安装旗帜升降台

14.1

所需零件

![ZH_55](./img/ZH_55.png)

14.2

注意线材的颜色，线材位置安装在右侧，红线位于底部，且需将线材从矩形孔传出

![ZH_56](./img/ZH_56.png)

![ZH_57](./img/ZH_57.png)

14.3

![ZH_58](./img/ZH_58.png)

![ZH_59](./img/ZH_59.png)

## 步骤 15：安装球场设施

15.1

所需零件

![ZH_60](./img/ZH_60.png)

15.2

![ZH_61](./img/ZH_61.png)

![ZH_62](./img/ZH_62.png)

## 步骤 16：安装门禁系统

16.1

所需零件

![ZH_63](./img/ZH_63.png)

16.2

![ZH_64](./img/ZH_64.png)

![ZH_65](./img/ZH_65.png)

16.3

![ZH_66](./img/ZH_66.png)

![ZH_67](./img/ZH_67.png)

16.4

![ZH_68](./img/ZH_68.png)

![ZH_69](./img/ZH_69.png)

![ZH_70](./img/ZH_70.png)

16.5

![ZH_71](./img/ZH_71.png)

![ZH_72](./img/ZH_72.png)

16.6

![ZH_73](./img/ZH_73.png)

![ZH_74](./img/ZH_74.png)

16.8![ZH_75](./img/ZH_75.png)



![ZH_76](./img/ZH_76.png)

## 步骤 17：安装校门口刷卡系统

17.1

所需零件

![ZH_77](./img/ZH_77.png)

17.2

![ZH_78](./img/ZH_78.png)

⚠️ **提醒：舵机安装至底板之前，需先将舵机的线材从底板的矩形孔穿入**

![ZH_78-1](./img/ZH_78-1.jpg)

![ZH_79](./img/ZH_79.png)

17.3

![ZH_80](./img/ZH_80.png)

![ZH_81](./img/ZH_81.png)

17.4

![ZH_82](./img/ZH_82.png)

![ZH_83](./img/ZH_83.png)

17.5

![ZH_84](./img/ZH_84.png)

![ZH_85](./img/ZH_85.png)

## 步骤 18：安装升旗台旗杆

18.1

所需零件

![ZH_86](./img/ZH_86.png)

18.2

![ZH_87](./img/ZH_87.png)

![ZH_88](./img/ZH_88.png)

![ZH_89](./img/ZH_89.png)

18.3

![ZH_90](./img/ZH_90.png)

![ZH_91](./img/ZH_91.png)

18.4

![ZH_92](./img/ZH_92.png)

![ZH_93](./img/ZH_93.png)

18.5

![ZH_95](./img/ZH_95.png)

![ZH_96](./img/ZH_96.png)



## 步骤19：给电机驱动板和舵机接线

19.1

请按照下方顺序进行接线，接线材时，请注意区分线材的颜色。

| 编号 | 元器件 | 线材 |       对应引脚       |
| :--: | :----: | :--: | :------------------: |
|  1   |  舵机  |  /   |   ESP32主板：IO32    |
|  2   |  电机  |  /   | 电机驱动板：蓝色端子 |

19.2

按图示将线材接到ESP32主控板。

| 元器件 | 线材 | 对应引脚 |
| :----: | :--: | :------: |
|  舵机  |  /   |   IO32   |

将舵机的线材从底部绕至教学楼背面，并从4号孔穿入。

![j19](./img/j19.jpg)

接入主控板时，请注意区分线材的颜色。

| 模块 | 线材颜色 | ESP32主控板引脚 |
| :--: | :------: | :-------------: |
|  V   |   红线   |        V        |
|  G   |   棕线   |        G        |
|  S   |   黄线   |      IO32       |

![J14](./img/J14.png)

19.3

按图示将线材接到ESP32主控板。

| 元器件 | 线材 |       对应引脚       |
| :----: | :--: | :------------------: |
|  电机  |  /   | 电机驱动板：蓝色端子 |

![j20](./img/j20.JPG)

![J6 - 1](./img/J6 - 1.png)







## 步骤 20：安装校园栅栏

20.1

所需零件

![OP](./img/ZH_97.png)

20.2

![ZH_98](./img/ZH_98.png)

![ZH_99](./img/ZH_99.png)

20.3

![ZH_100](./img/ZH_100.png)

![ZH_101](./img/ZH_101.png)

## 步骤 21：安装步进电机传动系统

21.1

所需零件

![ZH_102](./img/ZH_102.png)

21.2

![ZH_103](./img/ZH_103.png)

![ZH_104](./img/ZH_104.png)

21.3

![ZH_105](./img/ZH_105.png)

![ZH_106](./img/ZH_106.png)

21.4

![ZH_107](./img/ZH_107.png)

![ZH_108](./img/ZH_108.png)

21.5

![ZH_109](./img/ZH_109.png)

![ZH_110](./img/ZH_110.png)

21.6

![ZH_111](./img/ZH_111.png)

![ZH_112](./img/ZH_112.png)

## 步骤 22：安装窗帘

22.1

所需零件

![ZH_113](./img/ZH_113.png)

22.2

![ZH_114](./img/ZH_114.png)

![ZH_114-1](./img/ZH_114-1.jpg)

![ZH_115](./img/ZH_115.png)

![ZH_115-1](./img/ZH_115-1.jpg)

22.3

![ZH_116](./img/ZH_116.png)

![ZH_117](./img/ZH_117.png)

![ZH_118](./img/ZH_118.png)

将窗帘粘贴在教学楼的墙面上

![ZH_118-1](./img/ZH_118-1.jpg)

![ZH_119](./img/ZH_119.png)

![ZH_120](./img/ZH_120.png)

## 步骤 23：安装可移动的手球筐

23.1

所需零件

![ZH_121](./img/ZH_121.png)

23.2

![ZH_122](./img/ZH_122.png)

![ZH_123](./img/ZH_123.png)

![ZH_124](./img/ZH_124.png)

![ZH_125](./img/ZH_125.png)

![ZH_126](./img/ZH_126.png)

![ZH_127](./img/ZH_127.png)

## 步骤24：安装线材挂钩和电池盒

24.1

所需零件

![ZH_128](./img/ZH_128.png)

24.2

![ZH_129](./img/ZH_129.png)

![ZH_130](./img/ZH_130.png)

24.3

将步进电机的线材接入步进电机驱动板，可将舵机的线材和步进电机的线材整理至挂钩上

![ZH_130-1](./img/ZH_130-1.jpg)

![J4-1](./img/J4-1.png)

24.3

先将电池盒的线材按照图示方法穿过9号孔，再进行后续的安装

![ZH_131-1](./img/ZH_131-1.jpg)

![ZH_131](./img/ZH_131.png)

![ZH_132](./img/ZH_132.png)

![ZH_133](./img/ZH_133.png)

## 组装完成！

![ZH_134](./img/ZH_134.png)
